apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'maven-publish'

sourceCompatibility = "1.7"
targetCompatibility = "1.7"

repositories {
  mavenCentral()
  maven {url "http://developer.marklogic.com/maven2/"}
  maven {url "http://rjrudin.github.io/marklogic-java/releases"}
  maven {url publishUrl}
}

dependencies {
  compile 'com.marklogic:ml-javaclient-util:2.0.6'
  compile 'jaxen:jaxen:1.1.6'
  compile 'org.apache.httpcomponents:httpclient:4.3.5'
  compile 'org.springframework:spring-web:4.1.5.RELEASE'
  testCompile 'com.marklogic:ml-junit:2.0.2'
}

// This ensures that Gradle includes in the published jar any non-java files under src/main/java
sourceSets.main.resources.srcDir 'src/main/java'

publishing {
  publications {
    mainJava(MavenPublication) {
      from components.java
    }
  }
  repositories {
    maven {
      url publishUrl
    }
  }
}

task runTestClient(type: JavaExec) {
	main = "com.marklogic.appdeployer.mgmt.TestClient"
	classpath = sourceSets.test.runtimeClasspath
}

